# Hosts Inventory

So far when run our command, we actually get a couple of warnings on top. Host file not found with a path to some host file somewhere. Then it said provided hosts list is empty, only localhost is available. So we know that we execute modules on a host and so far we're using localhosts.

Well, turns out, out of the box, the only host we can run our modules against are localhost. If you want to start running them against other servers, we need to create a host configuration file that describes those. Now you can either do these in a global host file, in the location to your global host file might be different, or you can do it right inside your project and describe the host for this project, which is the way that I like to do it.

So in our project, let's create a new directory called Ansible to hold our Ansible configuration. And inside that we'll do a hosts.ini file. Now the smallest thing you need for a host is just the IP address, 127.0.0.1, let's configure our localhost again. And as soon as you do that, you can actually run against that, 127.0.0.1 -m ping. Then to tell Ansible, which host file to use, you'll pass -i ansible/host.ini. It's -i because the host file is known as your inventory, that's a bit of Ansible specific configuration. These is our host inventory.

When we try that, it actually fails. Because I keep telling you that Ansible works by doing SSH onto the server and then running those commands. Well technically that's not 100% true. You can actually configure Ansible to connect to your server in multiple different ways, though 99% of the time you're going to use SSH. The only real exception to that is when you're working on your local computer. We don't actually want to do SSH onto our local computer. We need to tell Ansible that this is a local connection. The way you do that is after your IP address, you type ansible_connection=local. You can look up for the other Ansible underscore connection values.

Now this is actually really important. So let's try that. We go back now, it works. But this little thing we did here is actually kind of important. Ansible connection's known as a variable and as we build out more complex Ansible configuration, this idea of setting and using variables is going to become more important. As you'll see, you can actually set more variables for each of your hosts, which is going to allow you to actually change behavior based on which host you're running something against.

So ansible_connection is just a built-in variable that Ansible uses and we're changing that variable here in our inventory file. One of the other common things you going to see in host files is that you're going to group them. Group the host into host groups. So let's try a new host group called local. Now right now this group only has one host under it, which is our localhost. As soon as you do that, instead of specifying the IP address here, you can say ansible local, and that's going to run that module against all hosts inside of the local group, which right now is just one, but we could add another one. Just to prove it we can say localhost and then we'll say ansible_connection=local. When we run the command now you actually see it run that twice, so you can already see how this is really powerful because you might need to run a command against all of your web servers, which might be a number of different IP addresses below that.

In fact, there's a special command called --list-hosts, which is actually going to list all of the hosts that are going to be effected when you run things against that group. So let's go back. Remove localhost and let's keep going and start executing these things, not against our local machine but actually against a virtual box, a virtual machine.

